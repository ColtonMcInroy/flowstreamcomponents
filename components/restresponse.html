<script total>

	exports.name = 'Response';
	exports.group = 'REST API';
	exports.icon = 'fa fa-retweet';
	exports.version = '1';
	exports.author = 'Peter Å irka';
	exports.config = { type: 'json', code: 200 };
	exports.inputs = [{ id: 'input', name: 'Response' }];

	exports.make = function(instance, config) {
		instance.message = function($) {
			var ctrl = $.refs.controller;
			if (ctrl) {
				ctrl.status = config.code;
				switch (config.type) {
					case 'json':
						ctrl.json($.data);
						break;
					case 'success':
						ctrl.success();
						break;
					case 'empty':
						ctrl.empty();
						break;
				}
			}
			$.destroy();
		};
	};

</script>

<readme>
This component can respond on the REST Route component.
</readme>

<settings>
	<div class="padding">
		<div class="row">
			<div class="col-md-3 m">
				<div data---="input__?.type__required:1;dirsource:json|JSON,success|Success,empty|Empty response">Type</div>
			</div>
			<div class="col-md-3 m">
				<div data---="input__?.code__required:1;type:number">Status code</div>
			</div>
		</div>
	</div>
</settings>

<style>
	.CLASS footer { padding: 10px; }
	.CLASS footer span { font-family: var(--monospace); }
	.CLASS footer .code { background-color: var(--color); color: #FFF; padding: 2px 3px; border-radius: var(--radius); }
</style>

<body>
	<header>
		<i class="ICON"></i>NAME
	</header>
	<footer>
		<span data-bind="CONFIG.code__text" class="code"></span> <span data-bind="CONFIG.type__text"></span>
	</footer>
</body>