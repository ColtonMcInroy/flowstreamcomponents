<script total>

	exports.name = 'Redirect';
	exports.icon = 'fa fa-share';
	exports.group = 'REST API';
	exports.author = 'Total.js';
	exports.version = '1';
	exports.config = {};
	exports.inputs = [{ id: 'input', name: 'Input' }];

	exports.make = function(instance, config) {

		instance.message = function($) {
			var data = $.data;
			var url = data.redirect || config.redirect;
			if (url && $.refs.controller)
				$.refs.controller.redirect(url, data.permanent === true || (!data.permanent === false && config.permanent === true) ? true : false);

			$.destroy();
			!url && instance.throw('No Redirect URL specified.');
		};

	};

</script>

<readme>
## Input
Incomming data have higher priority than the values set in the Configuration form.
Both the `url` and `permanent` are optional.
```js
{
	redirect: 'https://example.com',
	permanent: true|false
}
```
</readme>

<settings>
	<div class="padding">
		<div data---="input__?.redirect" class="m">Redirect URL</div>
		<div data---="input__?.permanent">Permanent redirect</div>
	</div>
</settings>

<style>
</style>

<script>
</script>

<body>
	<header>
		<i class="ICON"></i>NAME
	</header>
</body>